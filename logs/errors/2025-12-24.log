{"level":50,"time":"2025-12-24T16:55:49.607Z","pid":16157,"hostname":"ff9bc7466ec8","errorType":"BAD_REQUEST","message":"Недостаточно данных","statusCode":400,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T16:55:49.604Z","requestId":"req_1766595349604_dxalubbbz","error":"Request object is null or undefined","stack":"Error: Недостаточно данных\n    at ApiError.BadRequest (~/exceptions/api-error.js:19:23)\n    at saveSearchHistory (~/controllers/productsController.js:159:36)\n    at Layer.handleRequest (/app/node_modules/router/lib/layer.js:152:17)\n    at next (/app/node_modules/router/lib/route.js:157:13)\n    at ~/middlewares/auth-middleware.js:126:14\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":50,"time":"2025-12-24T17:02:34.547Z","pid":17024,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"69484a00845a8f1334918470"},"timestamp":"2025-12-24T17:02:34.547Z","requestId":"req_2408f6b5-fcfe-4ada-9171-c8ccac893c07","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:02:34.554Z","pid":17024,"hostname":"ff9bc7466ec8","requestId":"req_2408f6b5-fcfe-4ada-9171-c8ccac893c07","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"26ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:02:34.554Z"}
{"level":50,"time":"2025-12-24T17:02:35.635Z","pid":17024,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"69484a00845a8f1334918470"},"timestamp":"2025-12-24T17:02:35.634Z","requestId":"req_dbc579fd-5164-4e6f-bc23-90511ff3e870","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:02:35.638Z","pid":17024,"hostname":"ff9bc7466ec8","requestId":"req_dbc579fd-5164-4e6f-bc23-90511ff3e870","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"13ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:02:35.637Z"}
{"level":50,"time":"2025-12-24T17:02:37.713Z","pid":17024,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"69484a00845a8f1334918470"},"timestamp":"2025-12-24T17:02:37.713Z","requestId":"req_99fb8d80-8b74-4394-b595-41374e2f65f5","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:02:37.716Z","pid":17024,"hostname":"ff9bc7466ec8","requestId":"req_99fb8d80-8b74-4394-b595-41374e2f65f5","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"13ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:02:37.716Z"}
{"level":50,"time":"2025-12-24T17:02:42.152Z","pid":17024,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"69484a00845a8f1334918470"},"timestamp":"2025-12-24T17:02:42.152Z","requestId":"req_39dea8eb-09e7-4619-88ed-23f9f1f14839","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:02:42.154Z","pid":17024,"hostname":"ff9bc7466ec8","requestId":"req_39dea8eb-09e7-4619-88ed-23f9f1f14839","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"8ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:02:42.154Z"}
{"level":50,"time":"2025-12-24T17:03:00.414Z","pid":17024,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:03:00.414Z","requestId":"req_fb637bfa-9904-4c6e-a473-e6ccd9b4a0f4","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:03:00.419Z","pid":17024,"hostname":"ff9bc7466ec8","requestId":"req_fb637bfa-9904-4c6e-a473-e6ccd9b4a0f4","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"14ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:03:00.419Z"}
{"level":50,"time":"2025-12-24T17:03:01.693Z","pid":17024,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:03:01.693Z","requestId":"req_2b843230-42af-4c4d-b408-6f2e0ff24600","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:03:01.697Z","pid":17024,"hostname":"ff9bc7466ec8","requestId":"req_2b843230-42af-4c4d-b408-6f2e0ff24600","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"14ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:03:01.697Z"}
{"level":50,"time":"2025-12-24T17:03:04.293Z","pid":17024,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:03:04.292Z","requestId":"req_bce684a1-206b-4c0c-a1e1-14c551c6b9ec","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:03:04.298Z","pid":17024,"hostname":"ff9bc7466ec8","requestId":"req_bce684a1-206b-4c0c-a1e1-14c551c6b9ec","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"16ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:03:04.298Z"}
{"level":50,"time":"2025-12-24T17:03:08.850Z","pid":17024,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:03:08.849Z","requestId":"req_07926155-785a-4db2-9b7e-069f502c8729","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:03:08.855Z","pid":17024,"hostname":"ff9bc7466ec8","requestId":"req_07926155-785a-4db2-9b7e-069f502c8729","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"20ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:03:08.855Z"}
{"level":50,"time":"2025-12-24T17:04:02.571Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:04:02.571Z","requestId":"req_116cb5d1-e68e-457e-8b68-78de803fe5d1","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:04:02.576Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_116cb5d1-e68e-457e-8b68-78de803fe5d1","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"16ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:04:02.576Z"}
{"level":50,"time":"2025-12-24T17:04:03.725Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:04:03.725Z","requestId":"req_d45d6497-f64c-484a-ba89-f6062ce592cf","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:04:03.730Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_d45d6497-f64c-484a-ba89-f6062ce592cf","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"14ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:04:03.730Z"}
{"level":50,"time":"2025-12-24T17:04:06.294Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:04:06.293Z","requestId":"req_a89ce9a0-ab58-4c40-86b7-38a63477f8de","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:04:06.300Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_a89ce9a0-ab58-4c40-86b7-38a63477f8de","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"21ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:04:06.299Z"}
{"level":50,"time":"2025-12-24T17:04:11.370Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:04:11.370Z","requestId":"req_4fc3468c-bdd2-486e-93c0-c32f664bd36a","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:04:11.373Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_4fc3468c-bdd2-486e-93c0-c32f664bd36a","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"13ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:04:11.373Z"}
{"level":50,"time":"2025-12-24T17:04:30.893Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:04:30.893Z","requestId":"req_ee72b276-87e2-476d-ad61-01f564069b0b","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:04:30.895Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_ee72b276-87e2-476d-ad61-01f564069b0b","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"12ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:04:30.895Z"}
{"level":50,"time":"2025-12-24T17:04:32.217Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:04:32.217Z","requestId":"req_95bfe9dd-bb90-4ccd-9f72-659c3f0695d8","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:04:32.222Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_95bfe9dd-bb90-4ccd-9f72-659c3f0695d8","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"15ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:04:32.222Z"}
{"level":50,"time":"2025-12-24T17:04:34.380Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:04:34.380Z","requestId":"req_de020c81-67e1-452f-991b-5c28535c6022","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:04:34.384Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_de020c81-67e1-452f-991b-5c28535c6022","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"12ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:04:34.384Z"}
{"level":50,"time":"2025-12-24T17:04:39.034Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:04:39.034Z","requestId":"req_6242caab-301e-43db-9af7-e7fff7bd4a61","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:04:39.042Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_6242caab-301e-43db-9af7-e7fff7bd4a61","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"20ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:04:39.042Z"}
{"level":50,"time":"2025-12-24T17:04:46.396Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:04:46.396Z","requestId":"req_c34361e7-5d03-4e0c-a9eb-9dff3eb552c9","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:04:46.400Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_c34361e7-5d03-4e0c-a9eb-9dff3eb552c9","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"13ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:04:46.400Z"}
{"level":50,"time":"2025-12-24T17:04:47.600Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:04:47.600Z","requestId":"req_d98ab61f-be8a-4656-aac5-6133a065c18e","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:04:47.604Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_d98ab61f-be8a-4656-aac5-6133a065c18e","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"12ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:04:47.604Z"}
{"level":50,"time":"2025-12-24T17:04:50.139Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:04:50.139Z","requestId":"req_184562de-98ae-4aab-9eef-52bcb4582da7","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:04:50.144Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_184562de-98ae-4aab-9eef-52bcb4582da7","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"24ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:04:50.144Z"}
{"level":50,"time":"2025-12-24T17:04:54.690Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:04:54.689Z","requestId":"req_dea0fdac-971f-4ad1-a372-f6692929c35d","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:04:54.704Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_dea0fdac-971f-4ad1-a372-f6692929c35d","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"51ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:04:54.704Z"}
{"level":50,"time":"2025-12-24T17:10:53.602Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:10:53.602Z","requestId":"req_1766596253602_dhrfjw5qb","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:10:53.610Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_91ed984b-a048-4a6d-a572-fb2c83e5e30b","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"25ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:10:53.610Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:10:53.607Z"}}
{"level":50,"time":"2025-12-24T17:10:54.660Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:10:54.660Z","requestId":"req_1766596254660_66dm19zi4","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:10:54.665Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_2646b9b1-6329-4567-9b02-0ce604139ed3","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"9ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:10:54.665Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:10:54.662Z"}}
{"level":50,"time":"2025-12-24T17:10:56.841Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:10:56.841Z","requestId":"req_1766596256841_kpph7awwb","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:10:56.844Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_4a9cd686-6d94-47a2-8fb9-af5e786dba95","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"6ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:10:56.844Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:10:56.841Z"}}
{"level":50,"time":"2025-12-24T17:11:01.760Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:11:01.759Z","requestId":"req_1766596261759_zb1erlxy2","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:11:01.767Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_63c611c4-dfa4-4437-8315-435d617148ac","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"32ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:11:01.767Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:11:01.762Z"}}
{"level":50,"time":"2025-12-24T17:11:48.344Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:11:48.343Z","requestId":"req_1766596308343_iq3lxqdqd","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:11:48.356Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_dfe529fe-0927-438b-a4da-1ed80d90ac4f","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"31ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:11:48.356Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:11:48.346Z"}}
{"level":50,"time":"2025-12-24T17:11:48.366Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:11:48.366Z","requestId":"req_1766596308366_trjgfq1iw","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:11:48.369Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_8ca5e3e5-2a3e-422f-82c1-df21a6fd39a8","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"9ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:11:48.369Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:11:48.367Z"}}
{"level":50,"time":"2025-12-24T17:11:49.407Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:11:49.407Z","requestId":"req_1766596309407_wgsd6s0rz","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:11:49.411Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_fcc03843-0d8e-46b8-bcb0-1865850b3b91","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"7ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:11:49.411Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:11:49.407Z"}}
{"level":50,"time":"2025-12-24T17:11:49.621Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:11:49.621Z","requestId":"req_1766596309621_wfsudgbsq","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:11:49.625Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_d79f6606-225a-4b1d-90b6-970b9757f97e","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"8ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:11:49.625Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:11:49.622Z"}}
{"level":50,"time":"2025-12-24T17:11:51.991Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:11:51.991Z","requestId":"req_1766596311991_b0rk834b9","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:11:51.995Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_87b9ccc4-6262-4f12-a4ff-0c13cad59268","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"7ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:11:51.995Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:11:51.992Z"}}
{"level":50,"time":"2025-12-24T17:11:52.239Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:11:52.239Z","requestId":"req_1766596312239_6a44mdn84","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:11:52.242Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_06610269-eeba-41c8-ba07-a8e886b1fc8e","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"6ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:11:52.242Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:11:52.240Z"}}
{"level":50,"time":"2025-12-24T17:11:54.176Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:11:54.175Z","requestId":"req_1766596314175_vo7n6m3p4","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:11:54.177Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_e4227d83-c7ae-4815-a563-a75e362cd856","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"4ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:11:54.177Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:11:54.176Z"}}
{"level":50,"time":"2025-12-24T17:11:54.181Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:11:54.181Z","requestId":"req_1766596314181_u1vnfkdtm","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:11:54.185Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_99478774-c65f-47da-b969-9728be886a51","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"6ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:11:54.185Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:11:54.182Z"}}
{"level":50,"time":"2025-12-24T17:11:55.313Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:11:55.312Z","requestId":"req_1766596315312_g640jl0ee","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:11:55.316Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_2035f486-5da2-46ec-bdab-1ae991ec75d0","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"7ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:11:55.316Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:11:55.314Z"}}
{"level":50,"time":"2025-12-24T17:11:55.434Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:11:55.433Z","requestId":"req_1766596315433_okdqj7df2","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:11:55.436Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_d6e0cdaa-072e-4861-9e8d-75aa61fb21e7","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"9ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:11:55.436Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:11:55.434Z"}}
{"level":50,"time":"2025-12-24T17:11:56.427Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:11:56.427Z","requestId":"req_1766596316427_m3md16yea","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:11:56.430Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_1866a126-8dbb-40e2-9e72-ac1e9fd9dcf0","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"6ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:11:56.430Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:11:56.428Z"}}
{"level":50,"time":"2025-12-24T17:11:56.612Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:11:56.612Z","requestId":"req_1766596316612_2iun85v94","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:11:56.616Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_310b5631-7e2c-4413-8253-9b5f54371a40","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"9ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:11:56.616Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:11:56.613Z"}}
{"level":50,"time":"2025-12-24T17:11:57.507Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:11:57.507Z","requestId":"req_1766596317507_6bbi7daqq","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:11:57.511Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_3dde28e4-e89d-4048-b536-c71fe3b600f3","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"8ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:11:57.511Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:11:57.509Z"}}
{"level":50,"time":"2025-12-24T17:11:57.864Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:11:57.864Z","requestId":"req_1766596317864_0jmqcf57d","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:11:57.868Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_207fd631-7c7f-4801-a183-09984a1037e6","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"8ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:11:57.868Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:11:57.865Z"}}
{"level":50,"time":"2025-12-24T17:11:58.724Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:11:58.724Z","requestId":"req_27de42b1-6e46-456b-8487-e841809cb778","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:11:58.727Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_27de42b1-6e46-456b-8487-e841809cb778","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"14ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:11:58.727Z"}
{"level":50,"time":"2025-12-24T17:11:59.995Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:11:59.995Z","requestId":"req_df2de873-365b-42e1-b65c-228a38584339","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:11:59.999Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_df2de873-365b-42e1-b65c-228a38584339","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"10ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:11:59.999Z"}
{"level":50,"time":"2025-12-24T17:12:01.564Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:12:01.564Z","requestId":"req_1766596321564_5zjv2ywij","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:12:01.568Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_c8430b56-4ff0-4f9d-b91c-5405f3b3a356","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"6ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:12:01.568Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:12:01.566Z"}}
{"level":50,"time":"2025-12-24T17:12:02.200Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:12:02.199Z","requestId":"req_30ba2da0-541e-4fdf-af84-bc815a9aedb2","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:12:02.202Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_30ba2da0-541e-4fdf-af84-bc815a9aedb2","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"13ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:12:02.202Z"}
{"level":50,"time":"2025-12-24T17:12:02.982Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:12:02.982Z","requestId":"req_1766596322982_64apm89rg","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:12:02.986Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_381ccf29-e3dd-46b3-b70f-dcaa302605e1","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"8ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:12:02.986Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:12:02.983Z"}}
{"level":50,"time":"2025-12-24T17:12:07.230Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9"},"timestamp":"2025-12-24T17:12:07.230Z","requestId":"req_7ad5bb07-9315-419b-86ae-78b8b71fd431","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:12:07.237Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_7ad5bb07-9315-419b-86ae-78b8b71fd431","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"29ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:12:07.237Z"}
{"level":50,"time":"2025-12-24T17:13:10.921Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"69484963845a8f1334918419"},"timestamp":"2025-12-24T17:13:10.921Z","requestId":"req_62fb035e-561f-4c17-8532-4bea15297329","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:13:10.924Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_62fb035e-561f-4c17-8532-4bea15297329","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"9ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:13:10.924Z"}
{"level":50,"time":"2025-12-24T17:13:11.985Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"69484963845a8f1334918419"},"timestamp":"2025-12-24T17:13:11.985Z","requestId":"req_e7433536-79c2-45c1-a9ef-f073a862450b","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:13:11.989Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_e7433536-79c2-45c1-a9ef-f073a862450b","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"15ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:13:11.989Z"}
{"level":50,"time":"2025-12-24T17:13:14.276Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"69484963845a8f1334918419"},"timestamp":"2025-12-24T17:13:14.276Z","requestId":"req_0ce0ce73-7ad6-4410-8eee-12e2c9c72465","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:13:14.281Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_0ce0ce73-7ad6-4410-8eee-12e2c9c72465","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"16ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:13:14.281Z"}
{"level":50,"time":"2025-12-24T17:13:18.676Z","pid":17280,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }","stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: polet.usersearches index: userId_1_selectedListingId_1 dup key: { userId: ObjectId('694831342603f2f6602b3f9d'), selectedListingId: null }\n    at Connection.sendCommand (/app/node_modules/mongodb/lib/cmap/connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Connection.command (/app/node_modules/mongodb/lib/cmap/connection.js:327:26)\n    at async Server.command (/app/node_modules/mongodb/lib/sdam/server.js:168:29)\n    at async FindOneAndUpdateOperation.executeCommand (/app/node_modules/mongodb/lib/operations/command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (/app/node_modules/mongodb/lib/operations/find_and_modify.js:85:24)\n    at async tryOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:207:20)\n    at async executeOperation (/app/node_modules/mongodb/lib/operations/execute_operation.js:75:16)\n    at async Collection.findOneAndUpdate (/app/node_modules/mongodb/lib/collection.js:500:16)\n    at async model.Query._findOneAndUpdate (/app/node_modules/mongoose/lib/query.js:3474:13)","ip":"172.18.0.1","endpoint":"/products/saveSearchHistory","method":"POST","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"69484963845a8f1334918419"},"timestamp":"2025-12-24T17:13:18.676Z","requestId":"req_a406e12f-b139-4cc3-90b7-7fb1c9a152ed","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T17:13:18.680Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_a406e12f-b139-4cc3-90b7-7fb1c9a152ed","method":"POST","path":"/products/saveSearchHistory","originalUrl":"/products/saveSearchHistory","status":500,"duration":"14ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T17:13:18.680Z"}
{"level":50,"time":"2025-12-24T17:14:20.553Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:14:20.553Z","requestId":"req_1766596460553_a1mmnok9e","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:14:20.561Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_01cb9e23-9257-45b7-be82-fd99b5cc7da1","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"11ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:14:20.560Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:14:20.554Z"}}
{"level":50,"time":"2025-12-24T17:14:20.562Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:14:20.562Z","requestId":"req_1766596460562_hfn9v7bcd","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:14:20.565Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_9a38ce35-bdf7-4eb1-b6e9-de23236821de","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"8ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:14:20.565Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:14:20.563Z"}}
{"level":50,"time":"2025-12-24T17:14:21.588Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:14:21.588Z","requestId":"req_1766596461588_mqv4a38p3","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:14:21.592Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_777eb1ef-db48-4c78-8d34-fca1200eeeee","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"7ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:14:21.592Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:14:21.589Z"}}
{"level":50,"time":"2025-12-24T17:14:21.732Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:14:21.732Z","requestId":"req_1766596461732_fn870zsw2","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:14:21.736Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_eedb1008-6058-4edf-8b5d-0e893f49d29b","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"7ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:14:21.736Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:14:21.733Z"}}
{"level":50,"time":"2025-12-24T17:14:24.045Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:14:24.045Z","requestId":"req_1766596464045_qq4qv2x0j","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:14:24.049Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_bd79e03f-37ff-49bc-85e2-34c083b37f1c","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"10ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:14:24.049Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:14:24.047Z"}}
{"level":50,"time":"2025-12-24T17:14:24.155Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:14:24.155Z","requestId":"req_1766596464155_lmlo5szx2","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:14:24.158Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_0641c31b-7109-44f5-a291-fa3be30b45d1","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"6ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:14:24.158Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:14:24.155Z"}}
{"level":50,"time":"2025-12-24T17:14:27.763Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:14:27.763Z","requestId":"req_1766596467763_b2rek97rk","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:14:27.767Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_4bb76375-1209-4040-9f8d-ded6fab83de7","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"8ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:14:27.767Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:14:27.765Z"}}
{"level":50,"time":"2025-12-24T17:14:27.771Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:14:27.770Z","requestId":"req_1766596467770_l5lzbhdxm","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:14:27.774Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_010288ef-26aa-4449-a79a-2367b57dc048","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"5ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:14:27.774Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:14:27.772Z"}}
{"level":50,"time":"2025-12-24T17:14:28.964Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:14:28.964Z","requestId":"req_1766596468964_xbg3i8vq0","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:14:28.967Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_b66a4dcf-b5cb-40a1-8830-a7bef114e9e5","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"6ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:14:28.967Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:14:28.964Z"}}
{"level":50,"time":"2025-12-24T17:14:29.029Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:14:29.029Z","requestId":"req_1766596469029_qxfqep3em","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:14:29.032Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_fab14311-68b0-45b2-ae4b-d5b09cb4f5c0","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"5ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:14:29.032Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:14:29.030Z"}}
{"level":50,"time":"2025-12-24T17:14:31.332Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:14:31.332Z","requestId":"req_1766596471332_jcjjq67cz","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:14:31.335Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_3aec9238-08db-4c96-a26a-c778c5ca531e","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"6ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:14:31.335Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:14:31.333Z"}}
{"level":50,"time":"2025-12-24T17:14:31.502Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:14:31.502Z","requestId":"req_1766596471502_2ku0q5qdq","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:14:31.505Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_daa5e68d-f5f6-4f62-b01d-8549dfa9513b","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"6ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:14:31.505Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:14:31.503Z"}}
{"level":50,"time":"2025-12-24T17:14:36.139Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:14:36.139Z","requestId":"req_1766596476139_b028avn3d","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:14:36.144Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_d3855a9d-54bc-4bb8-ae4f-46f236f3e04b","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"9ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:14:36.144Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:14:36.142Z"}}
{"level":50,"time":"2025-12-24T17:14:36.463Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении продукта","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:14:36.463Z","requestId":"req_1766596476463_5qbyaj3kj","error":"Request object is null or undefined","stack":"Error: Ошибка при получении продукта\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at ProductService.getProductBySku (~/services/productService.js:193:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getProductBySku (~/controllers/productsController.js:49:23)"}
{"level":50,"time":"2025-12-24T17:14:36.466Z","pid":17280,"hostname":"ff9bc7466ec8","requestId":"req_4769c275-f339-44dd-a3b9-887419f75902","method":"GET","path":"/products/sku/undefined","originalUrl":"/products/sku/undefined?populate=all","status":500,"duration":"7ms","ip":"172.18.0.1","userId":"anonymous","userType":"guest","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","query":{"populate":"all"},"timestamp":"2025-12-24T17:14:36.466Z","response":{"message":"Ошибка при получении продукта","errors":[],"timestamp":"2025-12-24T17:14:36.464Z"}}
{"level":50,"time":"2025-12-24T17:14:53.690Z","pid":17280,"hostname":"ff9bc7466ec8","errorType":"UNAUTHORIZED","message":"Пользователь не авторизован","statusCode":401,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T17:14:53.689Z","requestId":"req_1766596493689_k93zcrlph","error":"Request object is null or undefined","stack":"Error: Пользователь не авторизован\n    at ApiError.UnauthorizedError (~/exceptions/api-error.js:26:23)\n    at ~/middlewares/auth-middleware.js:84:32\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":50,"time":"2025-12-24T18:38:05.009Z","pid":18737,"hostname":"ff9bc7466ec8","errorType":"BAD_REQUEST","message":"Неверный пароль","statusCode":400,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T18:38:05.008Z","requestId":"req_1766601485008_jypvqf8cs","error":"Request object is null or undefined","stack":"Error: Неверный пароль\n    at ApiError.BadRequest (~/exceptions/api-error.js:19:23)\n    at Object.login (~/services/authService.js:49:22)\n    at async login (~/controllers/authController.js:91:20)"}
{"level":50,"time":"2025-12-24T18:45:44.927Z","pid":18737,"hostname":"ff9bc7466ec8","errorType":"BAD_REQUEST","message":"Неверный пароль","statusCode":400,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T18:45:44.926Z","requestId":"req_1766601944926_om0spqdgi","error":"Request object is null or undefined","stack":"Error: Неверный пароль\n    at ApiError.BadRequest (~/exceptions/api-error.js:19:23)\n    at Object.login (~/services/authService.js:49:22)\n    at async login (~/controllers/authController.js:91:20)"}
{"level":50,"time":"2025-12-24T18:46:08.585Z","pid":18737,"hostname":"ff9bc7466ec8","errorType":"BAD_REQUEST","message":"Неверный пароль","statusCode":400,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T18:46:08.585Z","requestId":"req_1766601968585_nx77r01qv","error":"Request object is null or undefined","stack":"Error: Неверный пароль\n    at ApiError.BadRequest (~/exceptions/api-error.js:19:23)\n    at Object.login (~/services/authService.js:49:22)\n    at async login (~/controllers/authController.js:91:20)"}
{"level":50,"time":"2025-12-24T19:11:33.620Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:11:33.620Z","requestId":"req_1766603493620_bw0uvoq3f","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:11:33.628Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_37f805b3-3f23-4e53-8428-48500d0b431e","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"20ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:11:33.628Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:11:33.623Z"}}
{"level":50,"time":"2025-12-24T19:11:33.631Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:11:33.631Z","requestId":"req_1766603493631_9s3fluvhs","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:11:33.636Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_c1330a68-ca6f-4cc6-8034-f7ac08d66961","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"9ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:11:33.636Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:11:33.632Z"}}
{"level":50,"time":"2025-12-24T19:11:33.639Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:11:33.639Z","requestId":"req_1766603493639_6qtveewb2","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:11:33.642Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_cc41d2bb-41a2-478d-b131-9e1f2445a749","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"7ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:11:33.642Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:11:33.640Z"}}
{"level":50,"time":"2025-12-24T19:11:33.646Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:11:33.646Z","requestId":"req_1766603493646_mx9c9gb9g","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:11:33.649Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_6f958c0f-cfba-42b6-b8ac-dcd833fc67bd","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"5ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:11:33.649Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:11:33.647Z"}}
{"level":50,"time":"2025-12-24T19:11:34.671Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:11:34.670Z","requestId":"req_1766603494670_vwacyyb2i","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:11:34.675Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_7937a5ac-35ec-4539-8374-cae7eacddb39","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"13ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:11:34.675Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:11:34.672Z"}}
{"level":50,"time":"2025-12-24T19:11:34.788Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:11:34.788Z","requestId":"req_1766603494788_8hddguujm","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:11:34.790Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_ac8663d3-3c4f-4ae7-ae30-dd4c9c95bfb4","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"10ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:11:34.790Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:11:34.789Z"}}
{"level":50,"time":"2025-12-24T19:11:34.809Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:11:34.809Z","requestId":"req_1766603494809_qoxcovney","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:11:34.812Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_61e47727-4fed-4990-a415-97a21e6ad4d3","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"9ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:11:34.812Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:11:34.810Z"}}
{"level":50,"time":"2025-12-24T19:11:34.896Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:11:34.896Z","requestId":"req_1766603494896_92m9dm16b","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:11:34.899Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_8176a4c0-3520-4da1-a0c1-2fda4d032486","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"7ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:11:34.899Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:11:34.897Z"}}
{"level":50,"time":"2025-12-24T19:11:36.923Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:11:36.923Z","requestId":"req_1766603496923_tycywg4hz","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:11:36.928Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_5575292a-cbfe-406a-abb6-2a0ff2f0d264","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"12ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:11:36.928Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:11:36.924Z"}}
{"level":50,"time":"2025-12-24T19:11:37.010Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:11:37.010Z","requestId":"req_1766603497010_9rjmtryqk","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:11:37.013Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_8c368e8c-59c3-457f-bac8-951b308d3863","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"9ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:11:37.013Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:11:37.011Z"}}
{"level":50,"time":"2025-12-24T19:11:37.061Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:11:37.061Z","requestId":"req_1766603497061_czmyioh68","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:11:37.064Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_fc96ee5a-0b27-49cb-ab9f-7b213c9ea882","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"8ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:11:37.064Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:11:37.062Z"}}
{"level":50,"time":"2025-12-24T19:11:37.099Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:11:37.099Z","requestId":"req_1766603497099_bp4qu68ts","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:11:37.101Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_4a013c91-690a-454b-bce0-ddb433335e0c","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"7ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:11:37.101Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:11:37.100Z"}}
{"level":50,"time":"2025-12-24T19:11:41.292Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:11:41.291Z","requestId":"req_1766603501291_h2fk845la","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:11:41.297Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_3ae84e16-2c02-4f0c-aa4f-6571730d0c8b","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"14ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:11:41.297Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:11:41.294Z"}}
{"level":50,"time":"2025-12-24T19:11:41.633Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:11:41.633Z","requestId":"req_1766603501633_oqfo2u654","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:11:41.637Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_c9bccbe2-13ff-4163-b635-a49ce2b7c9f9","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"36ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:11:41.637Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:11:41.635Z"}}
{"level":50,"time":"2025-12-24T19:11:41.784Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:11:41.784Z","requestId":"req_1766603501784_siv20levd","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:11:41.787Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_1385263d-6dc3-4ba8-80ad-5c5a9bb8f80c","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"7ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:11:41.787Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:11:41.785Z"}}
{"level":50,"time":"2025-12-24T19:11:42.275Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:11:42.275Z","requestId":"req_1766603502275_1ra6dul0i","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:11:42.277Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_f446eed5-8a12-4f63-80c6-a188097fd199","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"6ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:11:42.277Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:11:42.275Z"}}
{"level":50,"time":"2025-12-24T19:12:24.278Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:12:24.278Z","requestId":"req_1766603544278_jnbfd7d0s","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:12:24.282Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_62958c18-b32e-47b5-aa4d-ce3d737748f5","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"45ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:12:24.282Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:12:24.281Z"}}
{"level":50,"time":"2025-12-24T19:12:25.539Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:12:25.538Z","requestId":"req_1766603545538_o30sl2sn0","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:12:25.543Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_92f91093-9102-45ed-b913-c64ae94be55c","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"18ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:12:25.543Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:12:25.541Z"}}
{"level":50,"time":"2025-12-24T19:12:27.943Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:12:27.943Z","requestId":"req_1766603547943_n8qv003lj","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:12:27.948Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_5fc966f7-edfe-4f4a-a4ba-cbbb62690244","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"13ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:12:27.948Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:12:27.944Z"}}
{"level":50,"time":"2025-12-24T19:12:32.717Z","pid":33,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:12:32.717Z","requestId":"req_1766603552717_705wufopu","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:21:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:12:32.723Z","pid":33,"hostname":"ff9bc7466ec8","requestId":"req_25ac13b0-a349-44f4-8919-4cfe5c3b955d","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"20ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:12:32.723Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:12:32.719Z"}}
{"level":50,"time":"2025-12-24T19:13:24.460Z","pid":134,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:13:24.459Z","requestId":"req_1766603604459_ruflttus2","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:29:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:13:24.471Z","pid":134,"hostname":"ff9bc7466ec8","requestId":"req_f8d2a151-0de1-4108-af8a-f5dd661d061f","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"52ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:13:24.471Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:13:24.466Z"}}
{"level":50,"time":"2025-12-24T19:13:25.577Z","pid":134,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:13:25.577Z","requestId":"req_1766603605577_bwit3g7wt","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:29:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:13:25.582Z","pid":134,"hostname":"ff9bc7466ec8","requestId":"req_319cd762-4cee-477d-bc14-5d1152d65fbe","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"15ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:13:25.582Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:13:25.579Z"}}
{"level":50,"time":"2025-12-24T19:13:27.710Z","pid":134,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:13:27.710Z","requestId":"req_1766603607710_eozhmnxpm","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:29:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:13:27.715Z","pid":134,"hostname":"ff9bc7466ec8","requestId":"req_77206881-0a2b-4fd4-bb2d-69b9b8036e1f","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"31ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:13:27.715Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:13:27.713Z"}}
{"level":50,"time":"2025-12-24T19:13:32.018Z","pid":134,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:13:32.018Z","requestId":"req_1766603612018_hdp21x3nc","error":"Request object is null or undefined","stack":"Error: Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.getAllUsers (~/services/usersService.js:29:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async getAllUsers (~/controllers/usersController.js:19:21)"}
{"level":50,"time":"2025-12-24T19:13:32.024Z","pid":134,"hostname":"ff9bc7466ec8","requestId":"req_86fbb6c4-5478-4459-a8e8-13f97032be9e","method":"GET","path":"/users","originalUrl":"/users","status":500,"duration":"14ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:13:32.024Z","response":{"message":"Ошибка при получении списка пользователей: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:13:32.021Z"}}
{"level":50,"time":"2025-12-24T19:28:41.376Z","pid":164,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при обновлении роли пользователя: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:28:41.376Z","requestId":"req_1766604521376_p05mmh3u9","error":"Request object is null or undefined","stack":"Error: Ошибка при обновлении роли пользователя: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.updateUserRole (~/services/usersService.js:101:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async updateUserRole (~/controllers/usersController.js:56:27)"}
{"level":50,"time":"2025-12-24T19:28:41.382Z","pid":164,"hostname":"ff9bc7466ec8","requestId":"req_44ea1683-fef8-4f3e-b4b0-5d555d8e696e","method":"PATCH","path":"/users/694831342603f2f6602b3f9d/role","originalUrl":"/users/694831342603f2f6602b3f9d/role","status":500,"duration":"27ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:28:41.382Z","response":{"message":"Ошибка при обновлении роли пользователя: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:28:41.379Z"}}
{"level":50,"time":"2025-12-24T19:28:42.573Z","pid":164,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при обновлении роли пользователя: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:28:42.573Z","requestId":"req_1766604522573_n941bnc1x","error":"Request object is null or undefined","stack":"Error: Ошибка при обновлении роли пользователя: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.updateUserRole (~/services/usersService.js:101:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async updateUserRole (~/controllers/usersController.js:56:27)"}
{"level":50,"time":"2025-12-24T19:28:42.576Z","pid":164,"hostname":"ff9bc7466ec8","requestId":"req_96eade7f-3837-4334-ae26-daef8db3bced","method":"PATCH","path":"/users/694831342603f2f6602b3f9d/role","originalUrl":"/users/694831342603f2f6602b3f9d/role","status":500,"duration":"20ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:28:42.576Z","response":{"message":"Ошибка при обновлении роли пользователя: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:28:42.574Z"}}
{"level":50,"time":"2025-12-24T19:28:44.763Z","pid":164,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при обновлении роли пользователя: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:28:44.763Z","requestId":"req_1766604524763_pjo5mv870","error":"Request object is null or undefined","stack":"Error: Ошибка при обновлении роли пользователя: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.updateUserRole (~/services/usersService.js:101:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async updateUserRole (~/controllers/usersController.js:56:27)"}
{"level":50,"time":"2025-12-24T19:28:44.767Z","pid":164,"hostname":"ff9bc7466ec8","requestId":"req_52ed4c61-eb73-46dc-8b68-e50b0ccfa9b6","method":"PATCH","path":"/users/694831342603f2f6602b3f9d/role","originalUrl":"/users/694831342603f2f6602b3f9d/role","status":500,"duration":"21ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:28:44.767Z","response":{"message":"Ошибка при обновлении роли пользователя: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:28:44.765Z"}}
{"level":50,"time":"2025-12-24T19:28:48.918Z","pid":164,"hostname":"ff9bc7466ec8","errorType":"DATABASE_ERROR","message":"Ошибка при обновлении роли пользователя: Path collision at tokens.resetToken remaining portion resetToken","statusCode":500,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T19:28:48.918Z","requestId":"req_1766604528918_y0q3e2n9j","error":"Request object is null or undefined","stack":"Error: Ошибка при обновлении роли пользователя: Path collision at tokens.resetToken remaining portion resetToken\n    at ApiError.DatabaseError (~/exceptions/api-error.js:93:23)\n    at UserService.updateUserRole (~/services/usersService.js:101:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async updateUserRole (~/controllers/usersController.js:56:27)"}
{"level":50,"time":"2025-12-24T19:28:48.921Z","pid":164,"hostname":"ff9bc7466ec8","requestId":"req_cd9fa32e-7fe6-4d86-bcc9-d779d893d08c","method":"PATCH","path":"/users/694831342603f2f6602b3f9d/role","originalUrl":"/users/694831342603f2f6602b3f9d/role","status":500,"duration":"21ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T19:28:48.921Z","response":{"message":"Ошибка при обновлении роли пользователя: Path collision at tokens.resetToken remaining portion resetToken","errors":[],"timestamp":"2025-12-24T19:28:48.919Z"}}
{"level":50,"time":"2025-12-24T20:09:41.570Z","pid":1570,"hostname":"ff9bc7466ec8","errorType":"UNAUTHORIZED","message":"Пользователь не авторизован","statusCode":401,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T20:09:41.566Z","requestId":"req_1766606981566_tuhndkl70","error":"Request object is null or undefined","stack":"Error: Пользователь не авторизован\n    at ApiError.UnauthorizedError (~/exceptions/api-error.js:26:23)\n    at ~/middlewares/auth-middleware.js:84:32\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":50,"time":"2025-12-24T20:14:43.432Z","pid":1570,"hostname":"ff9bc7466ec8","errorType":"BAD_REQUEST","message":"Минимальное количество для заказа: 5","statusCode":400,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T20:14:43.432Z","requestId":"req_1766607283432_jj2bxddtr","error":"Request object is null or undefined","stack":"Error: Минимальное количество для заказа: 5\n    at ApiError.BadRequest (~/exceptions/api-error.js:19:23)\n    at CartService.addOrUpdateItem (~/services/cartService.js:144:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async addOrUpdateItem (~/controllers/cartController.js:17:20)"}
{"level":50,"time":"2025-12-24T20:15:13.641Z","pid":2412,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.0.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.0.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"69450fb001e690d49676ca44","userRole":"admin","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:15:13.641Z","requestId":"req_e36b3d4c-9c0e-4ae1-bc68-8177f5afd6f1","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:15:13.648Z","pid":2412,"hostname":"ff9bc7466ec8","requestId":"req_e36b3d4c-9c0e-4ae1-bc68-8177f5afd6f1","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"44ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:15:13.648Z"}
{"level":50,"time":"2025-12-24T20:15:14.778Z","pid":2412,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.0.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.0.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"69450fb001e690d49676ca44","userRole":"admin","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:15:14.778Z","requestId":"req_df3c7caa-695e-4d5d-8a24-3f9063405eba","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:15:14.780Z","pid":2412,"hostname":"ff9bc7466ec8","requestId":"req_df3c7caa-695e-4d5d-8a24-3f9063405eba","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"26ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:15:14.780Z"}
{"level":50,"time":"2025-12-24T20:15:16.922Z","pid":2412,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.0.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.0.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"69450fb001e690d49676ca44","userRole":"admin","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:15:16.922Z","requestId":"req_45f2c5b0-21bb-420a-a0af-0dd0f4ff4afc","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:15:16.927Z","pid":2412,"hostname":"ff9bc7466ec8","requestId":"req_45f2c5b0-21bb-420a-a0af-0dd0f4ff4afc","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"30ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:15:16.927Z"}
{"level":50,"time":"2025-12-24T20:15:21.826Z","pid":2412,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.0.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.0.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"69450fb001e690d49676ca44","userRole":"admin","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:15:21.825Z","requestId":"req_652172d3-993a-42c5-a675-9a8dafd7c6fc","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:15:21.830Z","pid":2412,"hostname":"ff9bc7466ec8","requestId":"req_652172d3-993a-42c5-a675-9a8dafd7c6fc","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"19ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:15:21.830Z"}
{"level":50,"time":"2025-12-24T20:17:25.303Z","pid":2526,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.1.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.1.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"69450fb001e690d49676ca44","userRole":"admin","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:17:25.302Z","requestId":"req_1729d1d9-6cd4-4370-b2fc-d02557a44da6","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:17:25.310Z","pid":2526,"hostname":"ff9bc7466ec8","requestId":"req_1729d1d9-6cd4-4370-b2fc-d02557a44da6","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"55ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:17:25.310Z"}
{"level":50,"time":"2025-12-24T20:17:26.606Z","pid":2526,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.1.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.1.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"69450fb001e690d49676ca44","userRole":"admin","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:17:26.606Z","requestId":"req_a3478558-31e0-4c3e-ad45-58eaa6782cd4","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:17:26.610Z","pid":2526,"hostname":"ff9bc7466ec8","requestId":"req_a3478558-31e0-4c3e-ad45-58eaa6782cd4","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"28ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:17:26.610Z"}
{"level":50,"time":"2025-12-24T20:17:29.006Z","pid":2526,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.2.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.2.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"69450fb001e690d49676ca44","userRole":"admin","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:17:29.006Z","requestId":"req_12629eb0-d9b8-4c9f-b225-28190e005925","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:17:29.010Z","pid":2526,"hostname":"ff9bc7466ec8","requestId":"req_12629eb0-d9b8-4c9f-b225-28190e005925","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"26ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:17:29.010Z"}
{"level":50,"time":"2025-12-24T20:17:34.182Z","pid":2526,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.2.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.2.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"69450fb001e690d49676ca44","userRole":"admin","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:17:34.182Z","requestId":"req_eca8a4ab-a373-47f5-91ec-3ceae89e7ce8","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:17:34.186Z","pid":2526,"hostname":"ff9bc7466ec8","requestId":"req_eca8a4ab-a373-47f5-91ec-3ceae89e7ce8","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"36ms","ip":"172.18.0.1","userId":"69450fb001e690d49676ca44","userType":"admin","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:17:34.186Z"}
{"level":50,"time":"2025-12-24T20:18:01.938Z","pid":2526,"hostname":"ff9bc7466ec8","errorType":"BAD_REQUEST","message":"Неверный пароль","statusCode":400,"errors":[],"name":"Error","ip":"unknown","endpoint":"unknown","method":"unknown","userAgent":"unknown","userId":"anonymous","userRole":"guest","timestamp":"2025-12-24T20:18:01.938Z","requestId":"req_1766607481938_xnk7dvc9q","error":"Request object is null or undefined","stack":"Error: Неверный пароль\n    at ApiError.BadRequest (~/exceptions/api-error.js:19:23)\n    at Object.login (~/services/authService.js:49:22)\n    at async login (~/controllers/authController.js:91:20)"}
{"level":50,"time":"2025-12-24T20:18:13.403Z","pid":2526,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.0.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.0.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:18:13.403Z","requestId":"req_62d88664-20dc-4204-93f8-b739d0601b36","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:18:13.406Z","pid":2526,"hostname":"ff9bc7466ec8","requestId":"req_62d88664-20dc-4204-93f8-b739d0601b36","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"25ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:18:13.406Z"}
{"level":50,"time":"2025-12-24T20:18:14.541Z","pid":2526,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.0.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.0.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:18:14.541Z","requestId":"req_ace9323c-4a2f-4a70-8dac-38ab442665f5","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:18:14.545Z","pid":2526,"hostname":"ff9bc7466ec8","requestId":"req_ace9323c-4a2f-4a70-8dac-38ab442665f5","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"15ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:18:14.545Z"}
{"level":50,"time":"2025-12-24T20:18:16.740Z","pid":2526,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.0.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.0.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:18:16.740Z","requestId":"req_0f3f01ae-68d3-42b4-bca5-448bec0df412","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:18:16.743Z","pid":2526,"hostname":"ff9bc7466ec8","requestId":"req_0f3f01ae-68d3-42b4-bca5-448bec0df412","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"29ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:18:16.742Z"}
{"level":50,"time":"2025-12-24T20:18:21.505Z","pid":2526,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.0.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.0.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:18:21.505Z","requestId":"req_dcc61968-1fd2-4320-ae90-4d3b76793716","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:18:21.508Z","pid":2526,"hostname":"ff9bc7466ec8","requestId":"req_dcc61968-1fd2-4320-ae90-4d3b76793716","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"13ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:18:21.508Z"}
{"level":50,"time":"2025-12-24T20:18:26.861Z","pid":2526,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.0.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.0.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:18:26.861Z","requestId":"req_037beace-43c5-4015-b3e4-0605fb9f20a7","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:18:26.867Z","pid":2526,"hostname":"ff9bc7466ec8","requestId":"req_037beace-43c5-4015-b3e4-0605fb9f20a7","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"68ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:18:26.867Z"}
{"level":50,"time":"2025-12-24T20:18:28.184Z","pid":2526,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.0.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.0.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:18:28.183Z","requestId":"req_89f329d3-4792-497e-a50a-cb0f86a1cb1b","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:18:28.191Z","pid":2526,"hostname":"ff9bc7466ec8","requestId":"req_89f329d3-4792-497e-a50a-cb0f86a1cb1b","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"36ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:18:28.191Z"}
{"level":50,"time":"2025-12-24T20:18:30.352Z","pid":2526,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.0.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.0.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:18:30.352Z","requestId":"req_9b079f23-d78b-40fb-8e8d-59de34396c0f","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:18:30.356Z","pid":2526,"hostname":"ff9bc7466ec8","requestId":"req_9b079f23-d78b-40fb-8e8d-59de34396c0f","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"17ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:18:30.356Z"}
{"level":50,"time":"2025-12-24T20:18:34.962Z","pid":2592,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.0.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.0.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:18:34.961Z","requestId":"req_c15936e7-4df8-4cc2-a06a-a7ed58aba522","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:18:34.969Z","pid":2592,"hostname":"ff9bc7466ec8","requestId":"req_c15936e7-4df8-4cc2-a06a-a7ed58aba522","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"59ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:18:34.969Z"}
{"level":50,"time":"2025-12-24T20:19:33.123Z","pid":2592,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.0.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.0.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:19:33.122Z","requestId":"req_34e03711-ddf1-4edb-aea5-736106bc80f8","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:19:33.128Z","pid":2592,"hostname":"ff9bc7466ec8","requestId":"req_34e03711-ddf1-4edb-aea5-736106bc80f8","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"48ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:19:33.128Z"}
{"level":50,"time":"2025-12-24T20:19:34.442Z","pid":2592,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.0.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.0.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:19:34.442Z","requestId":"req_131644c4-8338-4ff7-87f9-be9e646bfd6a","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:19:34.448Z","pid":2592,"hostname":"ff9bc7466ec8","requestId":"req_131644c4-8338-4ff7-87f9-be9e646bfd6a","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"48ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:19:34.448Z"}
{"level":50,"time":"2025-12-24T20:19:36.667Z","pid":2592,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.0.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.0.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:19:36.667Z","requestId":"req_1d769872-1ef2-4874-a677-518856048c96","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:19:36.674Z","pid":2592,"hostname":"ff9bc7466ec8","requestId":"req_1d769872-1ef2-4874-a677-518856048c96","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"34ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:19:36.674Z"}
{"level":50,"time":"2025-12-24T20:19:41.831Z","pid":2592,"hostname":"ff9bc7466ec8","event":"UNEXPECTED_ERROR","error":"Cart validation failed: items.0.quantity: Некорректное количество товара","stack":"ValidationError: Cart validation failed: items.0.quantity: Некорректное количество товара\n    at Document.invalidate (/app/node_modules/mongoose/lib/document.js:3343:32)\n    at Subdocument.invalidate (/app/node_modules/mongoose/lib/types/subdocument.js:229:12)\n    at /app/node_modules/mongoose/lib/document.js:3104:17\n    at /app/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","ip":"172.18.0.1","endpoint":"/cart/items","method":"PUT","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","userId":"694831342603f2f6602b3f9d","userRole":"user","body":{"productId":"694aa4446e52e5001b4a57f9","quantity":1},"timestamp":"2025-12-24T20:19:41.831Z","requestId":"req_6d0aa411-175f-4bbb-a0e2-2a092f1574e1","severity":"CRITICAL"}
{"level":50,"time":"2025-12-24T20:19:41.841Z","pid":2592,"hostname":"ff9bc7466ec8","requestId":"req_6d0aa411-175f-4bbb-a0e2-2a092f1574e1","method":"PUT","path":"/cart/items","originalUrl":"/cart/items","status":500,"duration":"40ms","ip":"172.18.0.1","userId":"694831342603f2f6602b3f9d","userType":"user","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36","referer":"http://localhost:3000/","timestamp":"2025-12-24T20:19:41.841Z"}
